exports.id=0,exports.modules={"../build/contracts/FlightSuretyData.json":!1,"./src/server/server.js":function(e,r,t){"use strict";t.r(r);var s=t("../build/contracts/FlightSuretyApp.json"),o=(t("regenerator-runtime"),t("./src/server/config.json")),a=t("web3"),n=t.n(a),l=t("express"),c=t.n(l);let i=o.localhost,u=new n.a(new n.a.providers.WebsocketProvider(i.url.replace("http","ws"))),d=new u.eth.Contract(s.abi,i.appAddress),g=t("bignumber.js"),b=[],m=[{label:"STATUS_CODE_UNKNOWN",code:0},{label:"STATUS_CODE_ON_TIME",code:10},{label:"STATUS_CODE_LATE_AIRLINE",code:20},{label:"STATUS_CODE_LATE_WEATHER",code:30},{label:"STATUS_CODE_LATE_TECHNICAL",code:40},{label:"STATUS_CODE_LATE_OTHER",code:50}];!async function(){const e=await d.methods.REGISTRATION_FEE().call(),r=await u.eth.getAccounts();for(let t=11;t<41;t++){await d.methods.registerOracle().send({from:r[t],value:e,gas:3e6});const s=await d.methods.getMyIndexes().call({from:r[t]});b.push({address:r[t],indexes:s}),console.log(`Oracle ${r[t]} registered: ${s}`)}}(),d.events.OracleRequest({fromBlock:"latest"},(async function(e,r){e&&console.log(e);let t=r.returnValues.airline,s=r.returnValues.flight,o=new g(r.returnValues.timestamp),a=!1,n=m[1];console.log(`Flight scheduled to: ${new Date(o.toNumber())}`),new Date(o.toNumber())<Date.now()&&(n=m[2]),b.forEach(e=>{if(a)return!1;for(let r=0;r<3;r+=1)d.methods.submitOracleResponse(e.indexes[r],t,s,o.toNumber(),n.code).send({from:e.address,gas:4e6}).then(t=>{a=!0,console.log(`Oracle: ${e.indexes[r]} responded from flight ${s} with status ${n.code} - ${n.label}`)}).catch(e=>{console.log(e.message)})})}));const T=c()();T.get("/api",(e,r)=>{r.send({message:"An API for use with your Dapp!"})}),r.default=T},"babel-polyfill":!1,"bignumber.js":function(e,r){e.exports=require("bignumber.js")},"body-parser":!1,"regenerator-runtime":function(e,r){e.exports=require("regenerator-runtime")}};